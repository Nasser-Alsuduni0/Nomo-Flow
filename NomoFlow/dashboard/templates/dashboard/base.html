{% load static %}{% load dashboard_extras %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Nomo Flow — Dashboard{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{
      --sidebar:260px;
      --brand:#17a8ff;
      --text:#0f172a;
      --muted:#64748b;
      --bg:#f7f7fb;
      --card:#ffffff;
      --border:#eef2f7;
    }
    
    body{
      background:var(--bg);
      font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
      margin:0;
      padding:0;
    }
    
    /* Sidebar */
    .nf-sidebar{
      position:fixed;
      top:0;
      left:0;
      bottom:0;
      width:var(--sidebar);
      background:var(--card);
      border-right:1px solid var(--border);
      overflow:auto;
      z-index:1000;
      transition:transform 0.3s ease;
    }
    
    .nf-brand{
      display:flex;
      align-items:center;
      gap:10px;
      padding:14px 16px;
      border-bottom:1px solid var(--border);
      position:relative;
    }
    
    .nf-brand .name{
      font-weight:800;
      font-size:18px;
    }
    
    .nf-brand img{
      height:28px;
      width:auto;
    }
    
    /* Mobile menu button */
    .mobile-menu-btn{
      display:none;
      background:none;
      border:none;
      font-size:20px;
      cursor:pointer;
      color:var(--text);
      margin-left:auto;
    }
    
    .nf-nav .label{
      padding:10px 16px;
      color:var(--muted);
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.06em;
      font-weight:600;
    }
    
    .nf-nav a{
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 16px;
      color:var(--text);
      text-decoration:none;
      border-left:3px solid transparent;
      transition:all 0.2s ease;
      font-weight:500;
    }
    
    .nf-nav a:hover{
      background:#f6f9ff;
      color:var(--brand);
    }
    
    .nf-nav .active{
      background:#eaf4ff;
      border-left-color:var(--brand);
      color:var(--brand);
      font-weight:600;
    }
    
    /* Main content */
    .nf-main{
      margin-left:var(--sidebar);
      min-height:100vh;
      transition:margin-left 0.3s ease;
    }
    
    .nf-top{
      position:sticky;
      top:0;
      z-index:100;
      background:var(--card);
      border-bottom:1px solid var(--border);
      box-shadow:0 2px 10px rgba(0,0,0,0.05);
    }
    
    /* Mobile overlay */
    .mobile-overlay{
      display:none;
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:rgba(0,0,0,0.5);
      z-index:999;
    }
    
    .mobile-overlay.active{
      display:block;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      :root{
        --sidebar:280px;
      }
      
      .nf-sidebar{
        transform:translateX(-100%);
      }
      
      .nf-sidebar.mobile-open{
        transform:translateX(0);
      }
      
      .nf-main{
        margin-left:0;
      }
      
      .mobile-menu-btn{
        display:block;
      }
      
      .mobile-overlay.active{
        display:block;
      }
      
      .nf-brand{
        padding:12px 16px;
      }
      
      .nf-nav a{
        padding:14px 16px;
        font-size:15px;
      }
      
      .nf-top .container-fluid{
        padding:12px 16px;
      }
      
      .nf-main .container-fluid{
        padding:16px;
      }
    }
    
    @media (max-width: 480px) {
      .nf-brand .name{
        font-size:16px;
      }
      
      .nf-brand img{
        height:24px;
      }
      
      .nf-nav a{
        padding:12px 16px;
        font-size:14px;
      }
      
      .nf-nav .label{
        font-size:11px;
        padding:8px 16px;
      }
    }
    
    /* Card improvements */
    .card{
      border:0;
      box-shadow:0 2px 10px rgba(0,0,0,0.06);
      border-radius:12px;
      transition:all 0.3s ease;
    }
    
    .card:hover{
      box-shadow:0 4px 20px rgba(0,0,0,0.1);
      transform:translateY(-1px);
    }
    
    /* Button improvements */
    .btn{
      border-radius:8px;
      font-weight:600;
      transition:all 0.2s ease;
    }
    
    .btn:hover{
      transform:translateY(-1px);
    }
    
    /* Table responsive */
    .table-responsive{
      border-radius:8px;
      overflow:hidden;
    }
    
    /* Form improvements */
    .form-control{
      border-radius:8px;
      border:1px solid var(--border);
      transition:all 0.2s ease;
    }
    
    .form-control:focus{
      border-color:var(--brand);
      box-shadow:0 0 0 0.2rem rgba(23,168,255,0.25);
    }
  </style>
</head>
<body>
  <!-- Mobile Overlay -->
  <div class="mobile-overlay" id="mobile-overlay"></div>
  
  <aside class="nf-sidebar" id="sidebar">
    <div class="nf-brand">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 280 80" style="height:32px;width:auto">
        <!-- Three bars with blue colors -->
        <rect x="8" y="40" width="16" height="32" rx="3" ry="3" fill="#0ea5e9"/>
        <rect x="28" y="28" width="16" height="44" rx="3" ry="3" fill="#0ea5e9"/>
        <rect x="48" y="16" width="16" height="56" rx="3" ry="3" fill="#0ea5e9"/>
        
        <!-- Upward arrow -->
        <g id="logo-arrow" fill="none" stroke="#0ea5e9" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M 12 38 L 36 24 L 56 12 L 68 12"/>
          <path d="M 68 12 L 62 9 M 68 12 L 65 18"/>
        </g>
        
        <!-- Text -->
        <text x="85" y="45" font-family="Inter, system-ui, -apple-system, sans-serif" font-weight="700" font-size="28" fill="#1e293b" letter-spacing="-0.5">
          Nomo
        </text>
        <text x="85" y="68" font-family="Inter, system-ui, -apple-system, sans-serif" font-weight="700" font-size="28" fill="#1e293b" letter-spacing="-0.5">
          Flow
        </text>
      </svg>
      <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Close menu">✕</button>
    </div>
    <nav class="nf-nav">
      <div class="label">Features</div>
      <a href="/dashboard/" class="{% active '/dashboard' 'exact' %}"><i class="bi bi-speedometer"></i> Overview</a>
      <a href="/dashboard/campaign/" class="{% active '/dashboard/campaign' %}"><i class="bi bi-megaphone"></i> Campaign</a>
      <a href="/dashboard/live-view-counter/" class="{% active '/dashboard/live-view-counter' %}"><i class="bi bi-eye"></i> Live View Counter</a>
      <a href="/dashboard/email-collector/" class="{% active '/dashboard/email-collector' %}"><i class="bi bi-envelope"></i> Email Collector</a>
      <a href="/dashboard/discount-coupons/" class="{% active '/dashboard/discount-coupons' %}"><i class="bi bi-tag"></i> Discount Coupons</a>
      <a href="/dashboard/notifications/" class="{% active '/dashboard/notifications' %}"><i class="bi bi-bell"></i> Notifications</a>
      <a href="/dashboard/purchase-display/" class="{% active '/dashboard/purchase-display' %}"><i class="bi bi-cart"></i> Purchase Display</a>

      <div class="label">Account</div>
      <a href="/dashboard/settings/" class="{% active '/dashboard/settings' %}"><i class="bi bi-gear"></i> Settings</a>
      <a href="/" class=""><i class="bi bi-house"></i> Back to Home</a>
    </nav>
  </aside>

  <main class="nf-main">
    <div class="nf-top">
      <div class="container-fluid py-2 px-3 d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-3">
          <button class="mobile-menu-btn d-md-none" id="top-mobile-menu-btn" aria-label="Open menu">☰</button>
          <div class="fw-semibold">{% block header %}Dashboard{% endblock %}</div>
        </div>
        <div class="text-muted small">Signed in</div>
      </div>
    </div>
    <div class="container-fluid p-3 p-md-4">
      <!-- Display messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
      
      {% block content %}{% endblock %}
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Mobile navigation functionality
    const sidebar = document.getElementById('sidebar');
    const mobileOverlay = document.getElementById('mobile-overlay');
    const topMobileMenuBtn = document.getElementById('top-mobile-menu-btn');
    const sidebarMobileMenuBtn = document.getElementById('mobile-menu-btn');
    
    function openMobileMenu() {
      sidebar.classList.add('mobile-open');
      mobileOverlay.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeMobileMenu() {
      sidebar.classList.remove('mobile-open');
      mobileOverlay.classList.remove('active');
      document.body.style.overflow = '';
    }
    
    // Open mobile menu
    topMobileMenuBtn.addEventListener('click', openMobileMenu);
    
    // Close mobile menu
    sidebarMobileMenuBtn.addEventListener('click', closeMobileMenu);
    mobileOverlay.addEventListener('click', closeMobileMenu);
    
    // Close mobile menu when clicking on navigation links
    document.querySelectorAll('.nf-nav a').forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });
    
    // Close mobile menu on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && sidebar.classList.contains('mobile-open')) {
        closeMobileMenu();
      }
    });
    
    // Handle window resize
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768) {
        closeMobileMenu();
      }
    });
  </script>
</body>
</html>


