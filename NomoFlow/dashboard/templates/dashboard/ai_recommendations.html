{% extends 'dashboard/base.html' %}
{% load static %}
{% block title %}AI Recommendations · Dashboard{% endblock %}
{% block header %}Smart AI Recommendations{% endblock %}

{% block content %}
<div class="container py-4">

  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <h5 class="fw-semibold mb-3">
        <i class="bi bi-stars text-primary me-2"></i>
        Smart AI Recommendations
      </h5>
      <p class="text-muted small mb-4">
        Here you’ll find intelligent insights and suggestions generated by NomoFlow AI engine
        to improve your marketing performance.
      </p>

      <div id="ai-loader" class="text-center text-muted py-3">Loading AI insights...</div>
      <ul id="ai-recommendations" class="list-group list-group-flush d-none"></ul>
    </div>
  </div>

</div>

<script>
async function loadAIRecommendations(){
  const loader=document.getElementById("ai-loader");
  const list=document.getElementById("ai-recommendations");
  try{
    const r=await fetch("/dashboard/recommendations/");
    const data=await r.json();
    if(!data.recommendations?.length){loader.textContent="No AI suggestions yet.";return;}
    loader.classList.add("d-none");
    list.classList.remove("d-none");
    list.innerHTML=data.recommendations.map(r=>`
      <li class="list-group-item d-flex align-items-center">
        <i class="bi bi-lightbulb-fill text-warning me-2 fs-5"></i>
        <span>${r}</span>
      </li>`).join('');
  }catch(e){
    loader.textContent="⚠️ Failed to load AI insights.";
    console.warn("AI load error:", e);
  }
}
loadAIRecommendations();
</script>
{% endblock %}
